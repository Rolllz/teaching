Задание "Практические навыки работы с ZFS"

Цель:

Отработать навыки работы с созданием томов export/import и установкой параметров;

    - определить алгоритм с наилучшим сжатием;
    - определить настройки pool’a;
    - найти сообщение от преподавателей.
    - составить список команд, которыми получен результат с их выводами.

Описание домашнего задания:

Определить алгоритм с наилучшим сжатием:

    - Определить какие алгоритмы сжатия поддерживает zfs (gzip, zle, lzjb, lz4);
    - создать 4 файловых системы на каждой применить свой алгоритм сжатия;
    - для сжатия использовать либо текстовый файл, либо группу файлов.
   
Определить настройки пула.
С помощью команды zfs import собрать pool ZFS.
Командами zfs определить настройки:

    - размер хранилища;
    - тип pool;
    - значение recordsize;
    - какое сжатие используется;
    - какая контрольная сумма используется.

Работа со снапшотами:

    - скопировать файл из удаленной директории;
    - восстановить файл локально. zfs receive;
    - найти зашифрованное сообщение в файле secret_message.

В качестве рабочей системы используется Debian 12. Команды приведены в файле script1.sh.

Нюансы настройки и автоматизации работы с zfs в Debian:

    - директория с виртуальными дисками настраивается в начале Vagrantfile.
    - утилита script не хочет просто так записывать терминальную сессию во время провижна, так как по сути сессии нет. Поэтому используется параметр --command, а в качестве команды - исполняемый скрипт.
    - для установки необходимо добавить репозиторий debian-backports
    - для минимизации вывода от apt-get используется соответствующий параметр -qq.
    - при установке zfs-dkms вылезает окошко в псевдографике о несоответствии лицензий операционной системы и zfs. Для пропуска этого окошка используется параметр DEBIAN_FRONTEND=noninteractive.
    - команда "zfs receive otus/test@today < otus_task2.file" в скрипте не выполняется корректно, поэтому используется её аналог: cat otus_task2.file | zfs receive otus/test@today.

Результат вывода всех команд будет в файле session.log в папке с Vagrantfile.
